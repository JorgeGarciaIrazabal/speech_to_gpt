"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[444],{9444:(h,_,e)=>{e.r(_),e.d(_,{LoginPage:()=>p});var g=e(467),E=e(177),i=e(4341),s=e(3954),u=e(9323),n=e(4438),v=e(369),d=e(403);let p=(()=>{var l;class c{constructor(o,t,a){this.storage=o,this.router=t,this.route=a,this._storage=null}ngOnInit(){var o=this;return(0,g.A)(function*(){o._storage=yield o.storage.create(),o.route.snapshot.url.toString().includes("logout")&&(yield o.logout()),(yield o._storage.get("token"))&&(console.log("Token found"),o.router.navigate(["/chat"]))})()}logout(){var o=this;return(0,g.A)(function*(){var t;yield null===(t=o._storage)||void 0===t?void 0:t.remove("token")})()}onSubmit(o){var t=this;return(0,g.A)(function*(){console.log(o.value);try{var a;let r=yield u.Zc.loginForAccessTokenTokenPost({username:o.value.email,password:o.value.password});yield null===(a=t._storage)||void 0===a?void 0:a.set("token",r),u.Ds.TOKEN=r.access_token,t.router.navigate(["/chat"])}catch(r){console.error(r)}})()}}return(l=c).\u0275fac=function(o){return new(o||l)(n.rXU(v.w),n.rXU(d.Ix),n.rXU(d.nX))},l.\u0275cmp=n.VBU({type:l,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:21,vars:3,consts:[["loginForm","ngForm"],[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"ngSubmit"],[1,"label-padding"],["type","email","ngModel","","name","email"],["type","password","ngModel","","name","password"],["expand","full","type","submit",3,"disabled"]],template:function(o,t){if(1&o){const a=n.RV6();n.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"login"),n.k0s()()(),n.j41(4,"ion-content",2)(5,"ion-header",3)(6,"ion-toolbar")(7,"ion-title",4),n.EFF(8,"login"),n.k0s()()(),n.j41(9,"form",5,0),n.bIt("ngSubmit",function(){n.eBV(a);const P=n.sdS(10);return n.Njj(t.onSubmit(P))}),n.j41(11,"ion-item")(12,"ion-label",6),n.EFF(13,"Email:"),n.k0s(),n.nrm(14,"ion-input",7),n.k0s(),n.j41(15,"ion-item")(16,"ion-label",6),n.EFF(17,"Password:"),n.k0s(),n.nrm(18,"ion-input",8),n.k0s(),n.j41(19,"ion-button",9),n.EFF(20,"Login"),n.k0s()()()}if(2&o){const a=n.sdS(10);n.Y8G("translucent",!0),n.R7$(4),n.Y8G("fullscreen",!0),n.R7$(15),n.Y8G("disabled",!a.valid)}},dependencies:[s.W9,s.eU,s.BC,s.ai,E.MD,i.YN,i.qT,i.BC,i.cb,i.vS,i.cV,s.uz,s.he,s.$w,s.Jm],styles:[".label-padding[_ngcontent-%COMP%]{padding-right:10px}"]}),c})()}}]);